description: |
  Execute 'terraform output' in specified module path.

parameters:
  path:
    type: "string"
    description: "Path to the terraform module"
    default: "."
  timeout:
    description: Configure a custom timeout limit
    type: string
    default: 10m
  json:
    description: "Set output format to json"
    type: boolean
    default: false
  out:
    type: string
    description: The file path to save your terraform output to.
    default: "tf.outputs"

steps:
  - run:
      name: terraform output
      no_output_timeout: <<parameters.timeout>>
      environment:
        TF_PARAM_MOD_PATH: << parameters.path >>
        TF_PARAM_OUTPUT_AS_JSON: << parameters.json >>
        TF_PARAM_OUTPUTS_OUT: << parameters.out >>
      command: <<include(scripts/output.sh)>>
